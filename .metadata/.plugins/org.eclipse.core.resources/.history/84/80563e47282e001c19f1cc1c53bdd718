package com.pmg.pnn;

import static org.junit.Assert.assertEquals;

import java.text.SimpleDateFormat;
import java.util.Calendar;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

import com.pmg.domain.IncomeVO;
import com.pmg.service.IncomeService;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("file:src/main/webapp/WEB-INF/spring/root-context.xml")
public class IncomeMapperTest {
	
	@Autowired
	private IncomeService service;
	
	IncomeVO income = new IncomeVO();

	/*
	 * ( className_id , reserveType_id , roomPrice , roomType_id , bbqPrice , bbqType_id ,
     extraPeoplePrice ,extraPeopleType_id ,totalPrice ,note ,guestName ,IncomeDate  )
	 * */
	// 수입일지 등록 (insert)
	
	@Test
	public void incomeRegister() throws Exception{

		
		income.setClassName_id(1);
		income.setReserveType_id(1);
		income.setRoomPrice(1);
		income.setRoomType_id(1);
		income.setBbqPrice(1);
		income.setBbqType_id(1);
		income.setExtraPeoplePrice(1);
		income.setExtraPeopleType_id(1);
		income.setTotalPrice(1);
		income.setNote(null);
		income.setGuestName(null);
		income.setIncomeDate(null);
		

		
		service.incomeRegister(income);
		
	}
	
	// 수입일지 일별 조회
	@Test
	public void incomeDayRead() throws Exception{

		
		income.setClassName_id(1);
		income.setReserveType_id(1);
		income.setRoomPrice(1);
		income.setRoomType_id(1);
		income.setBbqPrice(1);
		income.setBbqType_id(1);
		income.setExtraPeoplePrice(1);
		income.setExtraPeopleType_id(1);
		income.setTotalPrice(1);
		income.setNote(null);
		income.setGuestName(null);
		income.setIncomeDate(null);
		

		
		service.incomeRegister(income);
		
	}
	
	// 수입일지 일별 수정
	
	// 수입일지 일별 삭제
	
	// 수입일지 기간별 조회(월단위)

	// 
	
	// 1년치 데이터 추가.
	@Test
	public void aa() throws Exception{
		
		SimpleDateFormat dateFormat;
        //dateFormat = new SimpleDateFormat("yyyyMM"); //년월 표시
        dateFormat = new SimpleDateFormat("yyyy-MM-dd"); //년월일 표시
        
        Calendar cal = Calendar.getInstance();
        
        
        cal.set ( 2022, 1-1, 1 ); //종료 날짜 셋팅
        String endDate = dateFormat.format(cal.getTime());
        
        cal.set ( 2021, 1-1, 1 ); //시작 날짜 셋팅
        String startDate = dateFormat.format(cal.getTime());    
        
        int i = 0;
        while(!startDate.equals(endDate)){ //다르다면 실행, 동일 하다면 빠져나감
            
            if(i==0) { //최초 실행 출력
                System.out.println(dateFormat.format(cal.getTime()));
            }
            
            //cal.add(Calendar.MONTH, 1); //1달 더해줌
            cal.add(Calendar.DATE, 1); //1일 더해줌
            startDate = dateFormat.format(cal.getTime()); //비교를 위한 값 셋팅
            

            if((i % 3) == 1) {
	            //+1달 출력
	            System.out.println(dateFormat.format(cal.getTime()));  
	            
	        	IncomeVO income = new IncomeVO();

	    		
	    		for( int j =1  ; j <=10;j++) {
	    			int ran = (int) (Math.random() * 10 + 1);

	    			if(ran != j) {
		    			int random, random2 ;
		    			
		    			random = (int) (Math.random() * 5 + 1);
		    			random2 = (int) (Math.random() * 3 + 1);
	
			            System.out.println(j);  

//		    			income.setClassName_id(j);
//		    			income.setReserveType_id(random);
//		    			income.setRoomPrice(1000);
//		    			income.setRoomType_id(random2);
//		    			income.setBbqPrice(1000);
//		    			income.setBbqType_id(random2);
//		    			income.setExtraPeoplePrice(1000);
//		    			income.setExtraPeopleType_id(random2);
//		    			income.setTotalPrice(3000);
//		    			income.setNote("-");
//		    			income.setGuestName(i+"이랑"+j);
//		    			income.setIncomeDate(dateFormat.format(cal.getTime()));
	    			}

	    			
	    			service.incomeRegister(income);
	    		}
            }
            i++;
        }
	}
}
